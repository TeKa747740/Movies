<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ÙÙ„Ø§Ù…</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap');
    body
 {
      background-color: #111;
      color: white;
      font-family: 'Tahoma', sans-serif;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 2rem;
      color: red;
      margin-bottom: 10px;
    }

    .search-container {
      margin-bottom: 20px;
    }

    #searchInput {
      padding: 10px;
      width: 70%;
      border-radius: 10px;
      border: none;
      font-size: 1rem;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
    }

    .filters button {
      background-color: #333;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 1.1rem;
      transition: 0.3s;
    }

    .filters button:hover {
      background-color: red;
    }

    .section-title {
      color: red;
      font-size: 1.8rem;
      margin: 20px 0 10px;
    }

    .movies-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-bottom: 40px;
    }

    .movie-card {
      background-color: #222;
      padding: 15px;
      border-radius: 10px;
      width: 180px;
      text-align: center;
      box-shadow: 0 0 10px #000;
    }

    .movie-card img {
      width: 100%;
      border-radius: 8px;
    }

    .movie-card h3 {
      font-size: 1.1rem;
      margin: 10px 0 5px;
    }

    .movie-card p {
      margin: 5px 0;
    }

    .movie-card button {
      background-color: red;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    .movie-card button:hover {
      background-color: darkred;
    }

    /* âœ… Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ØµÙˆØ±Ø© */
    .custom-header-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #222;
      padding: 10px 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px #000;
      margin-bottom: 20px;
    }

    .header-icons {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header-icon {
      color: white;
      font-size: 1.5rem;
      text-decoration: none;
    }

    .header-icon img {
      width: 24px;
      height: 24px;
    }

    .header-menu {
      list-style: none;
      display: flex;
      gap: 15px;
      margin: 0;
      padding: 0;
    }

    .header-menu li {
      display: inline;
    }

    .header-menu a {
      color: white;
      text-decoration: none;
      font-size: 1rem;
      transition: 0.3s;
    }

    .header-menu a:hover {
      color: red;
    }

    .header-logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
      position: relative;
    }

    .logo-main {
      color: red;
    }

    .logo-sub {
      color: white;
      font-size: 0.8rem;
      position: absolute;
      top: 50%;
      left: 100%;
      transform: translate(-50%, -50%);
    }

    .welcome-logo {
      display: inline-flex;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: 28px;
      direction: ltr;
      animation: fadeInDown 1s cubic-bezier(.23,1.01,.32,1) 0.1s both;
      background: #181818;
      border-radius: 12px;
      box-shadow: 0 4px 18px #000a, 0 1px 0 #fff2 inset;
      padding: 0 0 0 0;
      min-width: 0;
      max-width: 100vw;
    }
    .welcome-logo .welcome-text {
      font-family: 'Montserrat', 'Arial Black', Arial, sans-serif;
      font-size: 2.1rem;
      color: #fff;
      letter-spacing: 2px;
      background: linear-gradient(90deg, #e50914 80%, #b0060f 100%);
      padding: 8px 18px 8px 10px;
      border-radius: 12px 0 0 12px;
      text-shadow: 2px 2px 8px #000a, 0 1px 0 #fff2;
      font-weight: 900;
      transition: transform 0.3s cubic-bezier(.23,1.01,.32,1);
      margin: 0;
      display: inline-block;
    }
    .welcome-logo .logo-text {
      font-family: 'Montserrat', 'Arial Black', Arial, sans-serif;
      font-size: 2.1rem;
      color: #e50914;
      background: transparent;
      padding: 8px 18px 8px 0;
      border-radius: 0 12px 12px 0;
      margin-right: -8px;
      font-weight: 900;
      text-shadow: 2px 2px 8px #000a, 0 1px 0 #fff2;
      letter-spacing: 2px;
      transition: transform 0.3s cubic-bezier(.23,1.01,.32,1);
      margin-left: 0;
      display: inline-block;
    }
    .welcome-logo:hover .welcome-text,
    .welcome-logo:hover .logo-text {
      transform: scale(1.04) rotate(-1deg);
      filter: brightness(1.1) drop-shadow(0 0 8px #e50914cc);
    }
    @keyframes fadeInDown {
      0% { opacity: 0; transform: translateY(-40px) scale(0.95); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    @media (max-width: 700px) {
  .movies-container {
    gap: 10px;
  }
  .movie-card {
    width: 46vw;
    min-width: 140px;
    max-width: 180px;
    padding: 8px;
    margin: 0 auto;
  }
  .movie-card img {
    border-radius: 6px;
    height: 180px;
    object-fit: cover;
  }
  .section-title {
    font-size: 1.2rem;
    margin: 12px 0 6px;
  }
  .filters {
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 16px;
  }
  .filters button {
    font-size: 0.9rem;
    padding: 7px 10px;
    border-radius: 6px;
  }
  .welcome-logo {
    font-size: 1.1rem;
    padding: 0 4px;
    margin-bottom: 14px;
  }
  .welcome-logo .welcome-text,
  .welcome-logo .logo-text {
    font-size: 1.1rem;
    padding: 4px 8px 4px 4px;
  }
  .anime-top-card {
    flex-direction: column;
    align-items: center;
    padding: 10px 4px;
    gap: 10px;
    max-width: 98vw;
  }
  .anime-top-img {
    width: 120px;
    height: 170px;
    border-radius: 8px;
  }
  .anime-top-title {
    font-size: 1.1rem;
  }
  .anime-top-rating {
    font-size: 0.95rem;
  }
  .anime-top-desc {
    font-size: 0.95rem;
  }
  #searchInput {
    width: 98vw;
    font-size: 0.95rem;
    padding: 7px;
    border-radius: 7px;
  }
}
@media (max-width: 400px) {
  .movie-card {
    width: 90vw;
    min-width: 100px;
    max-width: 98vw;
    padding: 4px;
  }
  .movie-card img {
    height: 120px;
  }
  .anime-top-img {
    width: 80px;
    height: 110px;
  }
}
  </style>
</head>
<body>

  <!-- âœ… Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© -->
  <div class="welcome-logo">
    <span class="welcome-text">Welcome</span><span class="logo-text">TeKa Movies</span>
  </div>

  <!-- âœ… Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù…..." oninput="searchMovies()">
  </div>

  <!-- âœ… Ø§Ù„ÙÙ„Ø§ØªØ± -->
  <div class="filters">
  <button onclick="displayTMDBMovies()">ÙƒÙ„ Ø§Ù„Ø£ÙÙ„Ø§Ù…</button>
  <button onclick="displayMoviesByGenre(28)">Ø£ÙƒØ´Ù†</button>
  <button onclick="displayMoviesByGenre(878)">Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ</button>
  <button onclick="displayMoviesByGenre(27)">Ø±Ø¹Ø¨</button>
  <button onclick="displayMoviesByGenre(18)">Ø¯Ø±Ø§Ù…Ø§</button>
  <button onclick="displayAllSeries()">Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø£Ø¬Ù†Ø¨ÙŠØ©</button>
  <button onclick="displayEgyptianSeries()">Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù…ØµØ±ÙŠØ©</button>
  <button onclick="displayAllAnime()">ÙƒÙ„ Ø§Ù„Ø£Ù†Ù…ÙŠ</button>
  <button onclick="displayActionSciFiMovies()">Ø£ÙƒØ´Ù† Ã— Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ (2015-Ø§Ù„Ø¢Ù†)</button>
</div>

<!-- âœ… Ø£Ù‚Ø³Ø§Ù… -->
<h2 class="section-title" id="movies-section-title">ğŸ¥ Ø£ÙÙ„Ø§Ù…</h2>
<div class="movies-container" id="movies-container"></div>
<h2 class="section-title" id="series-section-title">ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø£Ø¬Ù†Ø¨ÙŠØ©</h2>
<div class="movies-container" id="series-container" style="display:none;"></div>
<h2 class="section-title" id="egyptian-series-section-title" style="display:none;">ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù…ØµØ±ÙŠØ©</h2>
<div class="movies-container" id="egyptian-series-container" style="display:none;"></div>
<h2 class="section-title" id="anime-section-title">ğŸŒ Ø£Ù†Ù…ÙŠ</h2>
<div class="movies-container" id="anime-container" style="display:none;"></div>
<div id="no-movies-message" style="color:#aaa; display:none; font-size:1.2rem; margin:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ†ÙŠÙ.</div>

<!-- Ø¥ØµÙ„Ø§Ø­: ØªØ¹Ø±ÙŠÙ Ø¯ÙˆØ§Ù„ TMDB ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„ØªØ¹Ù…Ù„ Ù…Ø¹ index.html -->
<script>
window.fetchPopularMovies = window.fetchPopularMovies || fetchPopularMovies;
window.fetchMoviesByGenre = window.fetchMoviesByGenre || fetchMoviesByGenre;
</script>
<script src="script.js"></script>
<script src="tmdb-fetch.js"></script>
<script>
window.IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';

// Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬
function renderList(containerId, list) {
  const container = document.getElementById(containerId);
  const noMoviesMsg = document.getElementById('no-movies-message');
  if (!container) return;
  container.innerHTML = "";
  if (list.length === 0) {
    if (noMoviesMsg) noMoviesMsg.style.display = 'block';
    return;
  } else {
    if (noMoviesMsg) noMoviesMsg.style.display = 'none';
  }
  list.forEach(item => {
    const card = createCard(item);
    container.appendChild(card);
  });
}

// Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¨Ø§Ù‚ÙŠ
function showSection(section) {
  document.getElementById('movies-container').style.display = section === 'movies' ? 'flex' : 'none';
  document.getElementById('series-container').style.display = section === 'series' ? 'flex' : 'none';
  document.getElementById('anime-container').style.display = section === 'anime' ? 'flex' : 'none';
  document.getElementById('egyptian-series-container').style.display = section === 'egyptianSeries' ? 'flex' : 'none';
  document.getElementById('movies-section-title').style.display = section === 'movies' ? 'block' : 'none';
  document.getElementById('series-section-title').style.display = section === 'series' ? 'block' : 'none';
  document.getElementById('anime-section-title').style.display = section === 'anime' ? 'block' : 'none';
  document.getElementById('egyptian-series-section-title').style.display = section === 'egyptianSeries' ? 'block' : 'none';
}

// Ø£ÙÙ„Ø§Ù…
function displayMoviesByGenre(genreId) {
  showSection('movies');
  fetchMoviesByGenre(genreId).then(movies => {
    renderList('movies-container', movies);
    document.getElementById('movies-section-title').textContent = `ğŸ¥ Ø£ÙÙ„Ø§Ù… ${getGenreName(genreId)}`;
  });
}
function displayTMDBMovies() {
  showSection('movies');
  fetchPopularMovies().then(movies => {
    renderList('movies-container', movies);
    document.getElementById('movies-section-title').textContent = 'ğŸ¥ Ø£ÙÙ„Ø§Ù…';
  });
}
function displayActionSciFiMovies() {
  showSection('movies');
  const apiKey = window.TMDB_API_KEY || 'eae62805e81ccceef6046c841a23b424';
  const defaultPoster = 'https://via.placeholder.com/400x600?text=No+Image';
  const genreIds = '28,878';
  const yearFrom = 2015;
  const yearTo = new Date().getFullYear();
  const maxPages = 500; // TMDB ÙŠØ³Ù…Ø­ Ø­ØªÙ‰ 500 ØµÙØ­Ø© ÙÙ‚Ø·
  const urls = [];
  for (let page = 1; page <= maxPages; page++) {
    urls.push(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&language=ar&page=${page}&sort_by=popularity.desc&with_genres=${genreIds}&primary_release_date.gte=${yearFrom}-01-01&primary_release_date.lte=${yearTo}-12-31`);
  }
  // Ø¬Ù„Ø¨ Ø£ÙˆÙ„ 5 ØµÙØ­Ø§Øª ÙÙ‚Ø· Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹ (Ù„ØªØ¬Ù†Ø¨ Ø¨Ø·Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„)ØŒ ÙˆÙŠÙ…ÙƒÙ† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹
  Promise.all(urls.slice(0, 5).map(url => fetch(url).then(r => r.json())))
    .then(results => {
      let movies = [];
      results.forEach(data => {
        if (data.results) movies = movies.concat(data.results);
      });
      if (movies.length === 0) throw new Error('No movies found');
      const movieCards = movies.map(item => {
        let img = item.poster_path ? (window.IMAGE_BASE_URL + item.poster_path) : defaultPoster;
        return {
          title: item.title || '',
          rating: item.vote_average ? (item.vote_average + '/10') : '',
          image: img,
          poster: img,
          description: item.overview || '',
          type: 'movie',
          id: item.id
        };
      });
      renderList('movies-container', movieCards);
      document.getElementById('movies-section-title').textContent = `ğŸ¥ Ø£ÙÙ„Ø§Ù… Ø£ÙƒØ´Ù† Ã— Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ (${yearFrom} - ${yearTo})`;
    })
    .catch(() => {
      document.getElementById('movies-container').innerHTML = '';
      document.getElementById('no-movies-message').style.display = 'block';
      document.getElementById('movies-section-title').textContent = `ğŸ¥ Ø£ÙÙ„Ø§Ù… Ø£ÙƒØ´Ù† Ã— Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ (${yearFrom} - ${yearTo})`;
    });
}

// Ø£Ù†Ù…ÙŠ
function displayAllAnime() {
  showSection('anime');
  const apiKey = window.TMDB_API_KEY || 'eae62805e81ccceef6046c841a23b424';
  const defaultPoster = 'https://via.placeholder.com/400x600?text=No+Image';
  // Ø¬Ù„Ø¨ 3 ØµÙØ­Ø§Øª Ù…Ù† Ø£Ø´Ù‡Ø± Ø§Ù„Ø£Ù†Ù…ÙŠØ§Øª Ù…Ù† TMDB (ØªØµÙ†ÙŠÙ Ø§Ù„Ø£Ù†Ù…ÙŠ: genre=16)
  const urls = [1, 2, 3].map(function(page) {
    return `https://api.themoviedb.org/3/discover/tv?api_key=${apiKey}&language=ar&page=${page}&sort_by=popularity.desc&with_genres=16`;
  });
  Promise.all(urls.map(function(url) { return fetch(url).then(function(r) { return r.json(); }); }))
    .then(function(results) {
      let tmdbAnime = [];
      results.forEach(function(data) {
        if (data.results) tmdbAnime = tmdbAnime.concat(data.results);
      });
      if (tmdbAnime.length === 0) throw new Error('No anime found');
      // Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ø£Ù†Ù…ÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ (Ø§Ù„Ø£ÙˆÙ„)
      const topAnime = tmdbAnime[0];
      const topImg = topAnime.poster_path ? (window.IMAGE_BASE_URL + topAnime.poster_path) : defaultPoster;
      const topTitle = topAnime.name || topAnime.title || 'Ø£Ù†Ù…ÙŠ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
      const topRating = topAnime.vote_average ? (topAnime.vote_average + '/10 â­') : 'Ø¨Ø¯ÙˆÙ† ØªÙ‚ÙŠÙŠÙ…';
      const topDesc = topAnime.overview || '';
      // Ø¹Ø±Ø¶ ÙƒØ§Ø±Øª Ù…Ù…ÙŠØ² ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
      const animeContainer = document.getElementById('anime-container');
      animeContainer.innerHTML = `
        <div class="anime-top-card">
          <img class="anime-top-img" src="${topImg}" alt="${topTitle}" onerror="this.onerror=null;this.src='${defaultPoster}'" />
          <div class="anime-top-details">
            <h2 class="anime-top-title">${topTitle}</h2>
            <div class="anime-top-rating">${topRating}</div>
            <div class="anime-top-desc">${topDesc}</div>
          </div>
        </div>
      `;
      // Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù†Ù…ÙŠØ§Øª (Ø¨Ø¯Ø¡Ù‹Ø§ Ù…Ù† Ø§Ù„Ø«Ø§Ù†ÙŠ)
      const restAnime = tmdbAnime.slice(1, 19).map(function(item) {
        let img = item.poster_path ? (window.IMAGE_BASE_URL + item.poster_path) : defaultPoster;
        return {
          title: item.name || item.title || '',
          rating: item.vote_average ? (item.vote_average + '/10') : '',
          image: img,
          poster: img,
          description: item.overview || '',
          type: 'anime',
          id: item.id
        };
      });
      restAnime.forEach(function(item) {
        const card = createCard(item);
        animeContainer.appendChild(card);
      });
      document.getElementById('anime-section-title').textContent = 'ğŸŒ Ø£Ø´Ù‡Ø± Ø§Ù„Ø£Ù†Ù…ÙŠØ§Øª';
    })
    .catch(function() {
      // fallback: Ø¹Ø±Ø¶ Ù†Ø§Ø±ÙˆØªÙˆ ÙÙ‚Ø·
      const narutoAnime = [{
        title: 'Naruto',
        rating: '8.8/10',
        image: 'https://image.tmdb.org/t/p/w500/vauCEnR7CiyBDzRCeElKkCaXIYu.jpg',
        poster: 'https://image.tmdb.org/t/p/w500/vauCEnR7CiyBDzRCeElKkCaXIYu.jpg',
        description: 'Ù‚ØµØ© Ù†ÙŠÙ†Ø¬Ø§ Ø´Ø§Ø¨ ÙŠØ³Ø¹Ù‰ Ù„ÙŠØµØ¨Ø­ Ù‡ÙˆÙƒØ§Ø¬ÙŠ. ØªÙ… ØªØ³Ø¬ÙŠÙ„Ù‡ ÙƒØ£Ø¹Ù„Ù‰ Ø£Ù†Ù…ÙŠ Ø·Ù„Ø¨Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù…Ù† Ù‚ÙØ¨Ù„ Guinness World Record ÙÙŠ 2024.',
        extra: 'youtube.com, anitrendz.com, en.wikipedia.org, instagram.com',
        id: 1735
      }];
      renderList('anime-container', narutoAnime);
      document.getElementById('anime-section-title').textContent = 'ğŸŒ Ù‚Ø³Ù… Ø§Ù„Ø£Ù†Ù…ÙŠ';
    });
}

// Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù…ØµØ±ÙŠØ©
window.egyptianSeries = [
  {
    title: "Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±",
    image: "https://i.imgur.com/1Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/1Q9Z1ZB.jpg",
    description: "Ù…Ø³Ù„Ø³Ù„ Ø¯Ø±Ø§Ù…ÙŠ ÙŠØªÙ†Ø§ÙˆÙ„ Ù‚ØµØ© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¹Ù† Ø£Ø­Ø¯ Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ù‚ÙˆØ§Øª Ø§Ù„Ù…Ø³Ù„Ø­Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©.",
    watchLink: "https://www.example.com/watch/elkhtyar",
    downloadLink: "https://www.example.com/download/elkhtyar",
    cast: [
      { name: "Ø£Ù…ÙŠØ± ÙƒØ±Ø§Ø±Ø©", character: "Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ù†Ø³ÙŠ", image: "https://i.imgur.com/1Q9Z1ZB.jpg" },
      { name: "Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙˆØ¶ÙŠ", character: "Ù‡Ø´Ø§Ù… Ø¹Ø´Ù…Ø§ÙˆÙŠ", image: "https://i.imgur.com/1Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø§Ù„Ø¨Ø±Ù†Ø³",
    image: "https://i.imgur.com/2Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/2Q9Z1ZB.jpg",
    description: "Ø¯Ø±Ø§Ù…Ø§ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ø¹Ù† Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„Ø¨Ø±Ù†Ø³.",
    watchLink: "https://www.example.com/watch/elprince",
    downloadLink: "https://www.example.com/download/elprince",
    cast: [
      { name: "Ù…Ø­Ù…Ø¯ Ø±Ù…Ø¶Ø§Ù†", character: "Ø±Ø¶ÙˆØ§Ù† Ø§Ù„Ø¨Ø±Ù†Ø³", image: "https://i.imgur.com/2Q9Z1ZB.jpg" },
      { name: "Ø£Ø­Ù…Ø¯ Ø²Ø§Ù‡Ø±", character: "ÙØªØ­ÙŠ Ø§Ù„Ø¨Ø±Ù†Ø³", image: "https://i.imgur.com/2Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø¬Ø¹ÙØ± Ø§Ù„Ø¹Ù…Ø¯Ø©",
    image: "https://i.imgur.com/3Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/3Q9Z1ZB.jpg",
    description: "Ù‚ØµØ© Ø±Ø¬Ù„ Ø£Ø¹Ù…Ø§Ù„ ÙŠÙˆØ§Ø¬Ù‡ ØªØ­Ø¯ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø©.",
    watchLink: "https://www.example.com/watch/gaafar",
    downloadLink: "https://www.example.com/download/gaafar",
    cast: [
      { name: "Ù…Ø­Ù…Ø¯ Ø±Ù…Ø¶Ø§Ù†", character: "Ø¬Ø¹ÙØ± Ø§Ù„Ø¹Ù…Ø¯Ø©", image: "https://i.imgur.com/3Q9Z1ZB.jpg" },
      { name: "Ù…Ù†Ø© ÙØ¶Ø§Ù„ÙŠ", character: "Ù†Ø±Ø¬Ø³", image: "https://i.imgur.com/3Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø§Ù„ÙƒØ¨ÙŠØ± Ø£ÙˆÙŠ",
    image: "https://i.imgur.com/4Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/4Q9Z1ZB.jpg",
    description: "ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ø¹Ù† Ø§Ù„ÙƒØ¨ÙŠØ± ÙˆØ¹Ø§Ø¦Ù„ØªÙ‡ ÙÙŠ Ø§Ù„Ù…Ø²Ø§Ø±ÙŠØ·Ø©.",
    watchLink: "https://www.example.com/watch/elkbeer",
    downloadLink: "https://www.example.com/download/elkbeer",
    cast: [
      { name: "Ø£Ø­Ù…Ø¯ Ù…ÙƒÙŠ", character: "Ø§Ù„ÙƒØ¨ÙŠØ± Ø£ÙˆÙŠ", image: "https://i.imgur.com/4Q9Z1ZB.jpg" },
      { name: "Ø¨ÙŠÙˆÙ…ÙŠ ÙØ¤Ø§Ø¯", character: "Ø¯ÙƒØªÙˆØ± Ø±Ø¨ÙŠØ¹", image: "https://i.imgur.com/4Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ù†ØµÙŠØ¨ÙŠ ÙˆÙ‚Ø³Ù…ØªÙƒ",
    image: "https://i.imgur.com/6Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/6Q9Z1ZB.jpg",
    description: "Ø¯Ø±Ø§Ù…Ø§ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø© Ø§Ù„Ù‚ØµØµ.",
    watchLink: "https://www.example.com/watch/naseeby",
    downloadLink: "https://www.example.com/download/naseeby",
    cast: [
      { name: "Ù‡Ø§Ù†ÙŠ Ø³Ù„Ø§Ù…Ø©", character: "(Ù…Ø®ØªÙ„Ù ÙÙŠ ÙƒÙ„ Ù‚ØµØ©)", image: "https://i.imgur.com/6Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø£Ø¨Ùˆ Ø§Ù„Ø¹Ø±ÙˆØ³Ø©",
    image: "https://i.imgur.com/7Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/7Q9Z1ZB.jpg",
    description: "Ø¯Ø±Ø§Ù…Ø§ Ø¹Ø§Ø¦Ù„ÙŠØ© Ù…ØµØ±ÙŠØ©.",
    watchLink: "https://www.example.com/watch/abouelarousa",
    downloadLink: "https://www.example.com/download/abouelarousa",
    cast: [
      { name: "Ø³ÙŠØ¯ Ø±Ø¬Ø¨", character: "Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ù…ÙŠØ¯", image: "https://i.imgur.com/7Q9Z1ZB.jpg" },
      { name: "Ø³ÙˆØ³Ù† Ø¨Ø¯Ø±", character: "Ø¹Ø§ÙŠØ¯Ø©", image: "https://i.imgur.com/7Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø§Ù„Ø´Ø§Ø±Ø¹ Ø§Ù„Ù„ÙŠ ÙˆØ±Ø§Ù†Ø§",
    image: "https://i.imgur.com/8Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/8Q9Z1ZB.jpg",
    description: "Ø¯Ø±Ø§Ù…Ø§ ØºØ§Ù…Ø¶Ø© Ø¹Ù† Ù…Ù†Ø²Ù„ Ù…Ø³ÙƒÙˆÙ† ÙˆØ£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ.",
    watchLink: "https://www.example.com/watch/sharea",
    downloadLink: "https://www.example.com/download/sharea",
    cast: [
      { name: "Ø¯Ø±Ø©", character: "Ù†Ø§Ø¯ÙŠØ§", image: "https://i.imgur.com/8Q9Z1ZB.jpg" },
      { name: "ÙØ§Ø±ÙˆÙ‚ Ø§Ù„ÙÙŠØ´Ø§ÙˆÙŠ", character: "(Ø¯ÙˆØ± Ø±Ø¦ÙŠØ³ÙŠ)", image: "https://i.imgur.com/8Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø§Ù„Ø²ÙˆØ¬Ø© 18",
    image: "https://i.imgur.com/9Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/9Q9Z1ZB.jpg",
    description: "ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ø¹Ù† Ø±Ø¬Ù„ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ¬Ø§Øª.",
    watchLink: "https://www.example.com/watch/zawga18",
    downloadLink: "https://www.example.com/download/zawga18",
    cast: [
      { name: "Ø­Ø³Ù† Ø§Ù„Ø±Ø¯Ø§Ø¯", character: "Ø­Ù…Ø²Ø©", image: "https://i.imgur.com/9Q9Z1ZB.jpg" }
    ]
  },
  {
    title: "Ø¨Ø¯Ù„ Ø§Ù„Ø­Ø¯ÙˆØªØ© ØªÙ„Ø§ØªØ©",
    image: "https://i.imgur.com/10Q9Z1ZB.jpg",
    poster: "https://i.imgur.com/10Q9Z1ZB.jpg",
    description: "Ø«Ù„Ø§Ø« Ù‚ØµØµ Ù…Ù†ÙØµÙ„Ø© ÙÙŠ Ù…Ø³Ù„Ø³Ù„ ÙˆØ§Ø­Ø¯.",
    watchLink: "https://www.example.com/watch/badel",
    downloadLink: "https://www.example.com/download/badel",
    cast: [
      { name: "Ø¯Ù†ÙŠØ§ Ø³Ù…ÙŠØ± ØºØ§Ù†Ù…", character: "(Ø¹Ø¯Ø© Ø´Ø®ØµÙŠØ§Øª)", image: "https://i.imgur.com/10Q9Z1ZB.jpg" }
    ]
  },
  // Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø±Ù…Ø¶Ø§Ù† 2025
  {
    title: "Ø§Ù„ÙˆØµÙŠØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø©",
    image: "https://i.imgur.com/ramadan2025-1.jpg",
    poster: "https://i.imgur.com/ramadan2025-1.jpg",
    description: "Ø¯Ø±Ø§Ù…Ø§ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ØªØ¯ÙˆØ± Ø­ÙˆÙ„ ØµØ±Ø§Ø¹ Ø¹Ø§Ø¦Ù„ÙŠ Ø¹Ù„Ù‰ Ù…ÙŠØ±Ø§Ø« Ø¶Ø®Ù… Ø¨Ø¹Ø¯ ÙˆÙØ§Ø© Ø§Ù„Ø£Ø¨ ÙÙŠ Ø£Ø¬ÙˆØ§Ø¡ Ù…Ù† Ø§Ù„ØªØ´ÙˆÙŠÙ‚.",
    watchLink: "https://www.example.com/watch/wasya2025",
    downloadLink: "https://www.example.com/download/wasya2025",
    cast: [
      { name: "ÙŠØ§Ø³Ø± Ø¬Ù„Ø§Ù„", character: "Ø­Ø³Ù†", image: "https://i.imgur.com/ramadan2025-1a.jpg" },
      { name: "Ù‡Ø§Ù„Ø© ØµØ¯Ù‚ÙŠ", character: "Ø§Ù„Ø£Ù…", image: "https://i.imgur.com/ramadan2025-1b.jpg" }
    ]
  },
  {
    title: "Ø¸Ù„ Ø±Ø¬Ù„",
    image: "https://i.imgur.com/ramadan2025-2.jpg",
    poster: "https://i.imgur.com/ramadan2025-2.jpg",
    description: "Ø¶Ø§Ø¨Ø· Ø´Ø±Ø·Ø© ÙŠÙˆØ§Ø¬Ù‡ Ù…Ø¤Ø§Ù…Ø±Ø© Ø®Ø·ÙŠØ±Ø© Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù‚ÙŠÙ‚Ù‡ ÙÙŠ Ø¬Ø±ÙŠÙ…Ø© ØºØ§Ù…Ø¶Ø© Ø®Ù„Ø§Ù„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù†.",
    watchLink: "https://www.example.com/watch/zillragol2025",
    downloadLink: "https://www.example.com/download/zillragol2025",
    cast: [
      { name: "Ø£Ù…ÙŠØ± ÙƒØ±Ø§Ø±Ø©", character: "Ø§Ù„Ø¶Ø§Ø¨Ø· ÙƒØ±ÙŠÙ…", image: "https://i.imgur.com/ramadan2025-2a.jpg" },
      { name: "Ø±ÙŠÙ‡Ø§Ù… Ø¹Ø¨Ø¯ Ø§Ù„ØºÙÙˆØ±", character: "Ø³Ù„Ù…Ù‰", image: "https://i.imgur.com/ramadan2025-2b.jpg" }
    ]
  },
  {
    title: "Ø­Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø§ÙƒÙŠÙ†",
    image: "https://i.imgur.com/ramadan2025-3.jpg",
    poster: "https://i.imgur.com/ramadan2025-3.jpg",
    description: "Ø­ÙƒØ§ÙŠØ§Øª Ø¥Ù†Ø³Ø§Ù†ÙŠØ© Ù…Ù† Ù‚Ù„Ø¨ Ø­Ø§Ø±Ø© Ø´Ø¹Ø¨ÙŠØ© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ ÙˆØ§Ù„Ø¯Ø±Ø§Ù…Ø§.",
    watchLink: "https://www.example.com/watch/hara2025",
    downloadLink: "https://www.example.com/download/hara2025",
    cast: [
      { name: "Ù…Ø­Ù…Ø¯ Ù‡Ù†ÙŠØ¯ÙŠ", character: "Ø³Ø¹ÙŠØ¯", image: "https://i.imgur.com/ramadan2025-3a.jpg" },
      { name: "Ø¨ÙŠÙˆÙ…ÙŠ ÙØ¤Ø§Ø¯", character: "Ø§Ù„Ù…Ø¹Ù„Ù… Ø´ÙˆÙ‚ÙŠ", image: "https://i.imgur.com/ramadan2025-3b.jpg" }
    ]
  }
];

// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ±: Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø£ÙŠ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…ÙÙ‚ÙˆØ¯ Ø¨ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
window.egyptianSeries = window.egyptianSeries.map(item => ({
  ...item,
  image: item.image && item.image.startsWith('http') ? item.image : 'https://via.placeholder.com/400x600?text=No+Image',
  poster: item.poster && item.poster.startsWith('http') ? item.poster : 'https://via.placeholder.com/400x600?text=No+Image',
  cast: item.cast ? item.cast.map(c => ({
    ...c,
    image: c.image && c.image.startsWith('http') ? c.image : 'https://via.placeholder.com/200x300?text=No+Image'
  })) : undefined
}));

// ØªØ¹Ø±ÙŠÙ Ù…ØµÙÙˆÙØ© series ÙÙŠ window Ù„ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹ ÙƒÙ…Ø§ ÙÙŠ window.egyptianSeries
window.series = [
  {
    title: "Breaking Bad",
    rating: "9.5/10",
    image: "https://image.tmdb.org/t/p/w600_and_h900_bestv2/ztkUQFLlC19CCMYHW9o1zWhJRNq.jpg",
    description: "Ù…Ø¯Ø±Ø³ ÙƒÙŠÙ…ÙŠØ§Ø¡ ÙŠØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ø£ÙƒØ¨Ø± ØªØ§Ø¬Ø± Ù…Ø®Ø¯Ø±Ø§Øª.",
    watchLink: "https://example.com/watch/breaking-bad",
    downloadLink: "https://example.com/download/breaking-bad"
  },
  {
    title: "Stranger Things",
    rating: "8.7/10",
    image: "https://image.tmdb.org/t/p/w500/x2LSRK2Cm7MZhjluni1msVJ3wDF.jpg",
    description: "Ù…Ø¬Ù…ÙˆØ¹Ø© Ø£Ø·ÙØ§Ù„ ÙŠÙƒØªØ´ÙÙˆÙ† Ø¹Ø§Ù„Ù…Ù‹Ø§ Ù…Ù‚Ù„ÙˆØ¨Ù‹Ø§ Ù…Ù„ÙŠØ¦Ù‹Ø§ Ø¨Ø§Ù„ØºÙ…ÙˆØ¶.",
    watchLink: "https://example.com/watch/stranger-things",
    downloadLink: "https://example.com/download/stranger-things"
  },
  {
    title: "The Last of Us",
    rating: "9.0/10",
    image: "https://image.tmdb.org/t/p/w500/uKvVjHNqB5VmOrdxqAt2F7J78ED.jpg",
    description: "Ø¨Ø¹Ø¯ Ø§Ù†ØªØ´Ø§Ø± ÙˆØ¨Ø§Ø¡ Ù‚Ø§ØªÙ„ØŒ Ø±Ø¬Ù„ ÙŠØ­Ù…ÙŠ ÙØªØ§Ø© Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø£Ù…Ù„ Ù„Ù„Ø¨Ø´Ø±ÙŠØ©.",
    watchLink: "https://example.com/watch/last-of-us",
    downloadLink: "https://example.com/download/last-of-us"
  },
  {
    title: "Game of Thrones",
    rating: "9.3/10",
    image: "https://image.tmdb.org/t/p/w500/u3bZgnGQ9T01sWNhyveQz0wH0Hl.jpg",
    description: "ØµØ±Ø§Ø¹ Ø§Ù„Ø¹Ø±ÙˆØ´ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³Ø¨Ø¹.",
    watchLink: "https://example.com/watch/got",
    downloadLink: "https://example.com/download/got"
  },
  {
    title: "Money Heist",
    rating: "8.2/10",
    image: "https://image.tmdb.org/t/p/w500/mo0FP1GxOFZT4UDde7RFDz5APXF.jpg",
    description: "Ù…Ø¬Ù…ÙˆØ¹Ø© Ù„ØµÙˆØµ ÙŠØ®Ø·Ø·ÙˆÙ† Ù„Ø£ÙƒØ¨Ø± Ø³Ø±Ù‚Ø© ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®.",
    watchLink: "https://example.com/watch/money-heist",
    downloadLink: "https://example.com/download/money-heist"
  },
  {
    title: "Peaky Blinders",
    rating: "8.8/10",
    image: "https://image.tmdb.org/t/p/w500/vUUqzWa2LnHIVqkaKVlVGkVcZIW.jpg",
    description: "Ø¹ØµØ§Ø¨Ø© Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø² ÙÙŠ Ø¨Ø±Ù…Ù†ØºÙ‡Ø§Ù….",
    watchLink: "https://example.com/watch/peaky-blinders",
    downloadLink: "https://example.com/download/peaky-blinders"
  }
];

function displayEgyptianSeries() {
  showSection('egyptianSeries');
  const apiKey = window.TMDB_API_KEY || 'eae62805e81ccceef6046c841a23b424';
  const defaultPoster = 'https://via.placeholder.com/400x600?text=No+Image';
  // Ø¬Ù„Ø¨ 3 ØµÙØ­Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…ØµØ±ÙŠØ© Ù…Ù† TMDB
  const urls = [1, 2, 3].map(function(page) {
    return `https://api.themoviedb.org/3/discover/tv?api_key=${apiKey}&language=ar&page=${page}&sort_by=popularity.desc&with_origin_country=EG`;
  });
  Promise.all(urls.map(function(url) { return fetch(url).then(function(r) { return r.json(); }); }))
    .then(function(results) {
      var tmdbEgyptianSeries = [];
      results.forEach(function(data) {
        if (data.results) tmdbEgyptianSeries = tmdbEgyptianSeries.concat(data.results.map(function(item) {
          var img = item.poster_path ? (window.IMAGE_BASE_URL + item.poster_path) : defaultPoster;
          return {
            title: item.name,
            rating: item.vote_average ? (item.vote_average + '/10') : '',
            image: img,
            poster: img,
            description: item.overview || '',
            watchLink: '',
            downloadLink: ''
          };
        }));
      });
      // Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ø´ÙƒÙ„ ØµØ§Ø±Ù…
      var allSeries = [];
      if (window.egyptianSeries && Array.isArray(window.egyptianSeries)) {
        allSeries = allSeries.concat(window.egyptianSeries.map(function(item) {
          let img = (item.image && typeof item.image === 'string' && item.image.startsWith('http')) ? item.image : defaultPoster;
          let poster = (item.poster && typeof item.poster === 'string' && item.poster.startsWith('http')) ? item.poster : defaultPoster;
          // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© Ø£Ùˆ ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­Ø©
          if (img.endsWith('.jpg') || img.endsWith('.png')) {
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ¹Ù…Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
          } else {
            img = defaultPoster;
          }
          if (poster.endsWith('.jpg') || poster.endsWith('.png')) {
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ¹Ù…Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
          } else {
            poster = defaultPoster;
          }
          return {
            ...item,
            image: img,
            poster: poster
          };
        }));
      }
      renderList('egyptian-series-container', allSeries.concat(tmdbEgyptianSeries));
      document.getElementById('egyptian-series-section-title').textContent = 'ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù…ØµØ±ÙŠØ©';
    })
    .catch(function() {
      // fallback: Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø· Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø¬Ù„Ø¨
      var allSeries = [];
      if (window.egyptianSeries && Array.isArray(window.egyptianSeries)) {
        allSeries = allSeries.concat(window.egyptianSeries.map(function(item) {
          let img = (item.image && typeof item.image === 'string' && item.image.startsWith('http')) ? item.image : defaultPoster;
          let poster = (item.poster && typeof item.poster === 'string' && item.poster.startsWith('http')) ? item.poster : defaultPoster;
          if (img.endsWith('.jpg') || img.endsWith('.png')) {
          } else {
            img = defaultPoster;
          }
          if (poster.endsWith('.jpg') || poster.endsWith('.png')) {
          } else {
            poster = defaultPoster;
          }
          return {
            ...item,
            image: img,
            poster: poster
          };
        }));
      }
      renderList('egyptian-series-container', allSeries);
      document.getElementById('egyptian-series-section-title').textContent = 'ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù…ØµØ±ÙŠØ©';
    });
}

function displayAllSeries() {
  showSection('series');
  const apiKey = window.TMDB_API_KEY || 'eae62805e81ccceef6046c841a23b424';
  // Ø¬Ù„Ø¨ 3 ØµÙØ­Ø§Øª Ù…Ù† Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù†ØªÙÙ„ÙŠÙƒØ³ ÙÙ‚Ø·
  const urls = [1, 2, 3].map(function(page) {
    return `https://api.themoviedb.org/3/discover/tv?api_key=${apiKey}&language=ar&page=${page}&sort_by=popularity.desc&with_networks=213`;
  });
  Promise.all(urls.map(function(url) { return fetch(url).then(function(r) { return r.json(); }); }))
    .then(function(results) {
      var tmdbNetflixSeries = [];
      results.forEach(function(data) {
        if (data.results) tmdbNetflixSeries = tmdbNetflixSeries.concat(data.results);
      });
      // Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
      var allSeries = [];
      if (window.foreignSeries && Array.isArray(window.foreignSeries)) {
        allSeries = allSeries.concat(window.foreignSeries);
      }
      if (window.series && Array.isArray(window.series)) {
        allSeries = allSeries.concat(window.series);
      }
      // Ø¯Ù…Ø¬ Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù†ØªÙÙ„ÙŠÙƒØ³ Ù…Ø¹ Ø§Ù„Ù…Ø­Ù„ÙŠØ©
      renderList('series-container', allSeries.concat(tmdbNetflixSeries));
      document.getElementById('series-section-title').textContent = 'ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø£Ø¬Ù†Ø¨ÙŠØ©';
    })
    .catch(function() {
      // fallback: Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø· Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø¬Ù„Ø¨
      var allSeries = [];
      if (window.foreignSeries && Array.isArray(window.foreignSeries)) {
        allSeries = allSeries.concat(window.foreignSeries);
      }
      if (window.series && Array.isArray(window.series)) {
        allSeries = allSeries.concat(window.series);
      }
      renderList('series-container', allSeries);
      document.getElementById('series-section-title').textContent = 'ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø£Ø¬Ù†Ø¨ÙŠØ©';
    });
}

// ØªØ¹Ø±ÙŠÙ Ø¯Ø§Ù„Ø© goToDetails ÙÙŠ index.html Ù„ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹
function goToDetails(titleEncoded) {
  const title = decodeURIComponent(titleEncoded);
  // Ø§Ø¨Ø­Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø­Ù„ÙŠØ©
  const allItems = (window.movies || []).concat(
    window.series || [],
    window.anime || [],
    window.egyptianSeries || []
  );
  const item = allItems.find(m => m.title === title);
  if (item) {
    let url = `details.html?title=${encodeURIComponent(item.title)}&rating=${encodeURIComponent(item.rating || '')}&image=${encodeURIComponent(item.image)}&description=${encodeURIComponent(item.description || '')}&watchLink=${encodeURIComponent(item.watchLink || '')}&downloadLink=${encodeURIComponent(item.downloadLink || '')}`;
    if (item.cast) {
      url += `&cast=${encodeURIComponent(JSON.stringify(item.cast))}`;
    }
    window.location.href = url;
  }
}

// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù„Ù„Ø£ÙÙ„Ø§Ù…
function getGenreName(id) {
  switch(id) {
    case 28: return 'Ø£ÙƒØ´Ù†';
    case 878: return 'Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ';
    case 27: return 'Ø±Ø¹Ø¨';
    case 18: return 'Ø¯Ø±Ø§Ù…Ø§';
    default: return '';
  }
}
// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù„Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª
function getSeriesGenreName(id) {
  switch(id) {
    case 10759: return 'Ø£ÙƒØ´Ù†';
    case 18: return 'Ø¯Ø±Ø§Ù…Ø§';
    default: return '';
  }
}
// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù„Ù„Ø£Ù†Ù…ÙŠ
function getAnimeGenreName(id) {
  switch(id) {
    case 16: return 'Ù…ØºØ§Ù…Ø±Ø§Øª';
    case 10765: return 'Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ';
    default: return '';
  }
}
// Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø£Ø¸Ù‡Ø± Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙÙ‚Ø·
function openSectionFromURL() {
  const params = new URLSearchParams(window.location.search);
  const from = params.get('from');
  if (from === 'anime') {
    showSection('anime');
    displayAllAnime();
  } else if (from === 'series') {
    showSection('series');
    displayAllSeries();
  } else if (from === 'egyptianSeries') {
    showSection('egyptianSeries');
    displayEgyptianSeries();
  } else if (from === 'movies') {
    showSection('movies');
    displayTMDBMovies();
  } else if (from) {
    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‚ÙŠÙ…Ø© from ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©ØŒ Ù„Ø§ ØªÙØ¹Ù„ Ø´ÙŠØ¦Ù‹Ø§ (Ø§Ø¨Ù‚ ÙÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ)
    // ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ ØªØ¬Ø§Ù‡Ù„
    // Ù„Ø§ ØªØ±Ø¬Ø¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
    return;
  } else {
    showSection('movies');
    displayTMDBMovies();
  }
  window.currentSection = from || 'movies';
}
openSectionFromURL();

// ØªØ¹Ø¯ÙŠÙ„ createCard: Ø¯Ø¹Ù… ÙƒÙ„ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø£Ù†Ù…ÙŠ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡
function createCard(item) {
  const card = document.createElement("div");
  card.className = "movie-card";
  const defaultPoster = "https://via.placeholder.com/400x600?text=No+Image";
  let imgSrc = defaultPoster;
  if (item.poster && typeof item.poster === 'string' && item.poster.startsWith('http')) {
    imgSrc = item.poster;
  } else if (item.image && typeof item.image === 'string' && item.image.startsWith('http')) {
    imgSrc = item.image;
  } else if (item.poster_path) {
    imgSrc = window.IMAGE_BASE_URL + item.poster_path;
  }
  const title = item.title || item.name || 'Ø£Ù†Ù…ÙŠ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
  const rating = item.vote_average ? (item.vote_average + '/10 â­') : (item.rating || 'Ø¨Ø¯ÙˆÙ† ØªÙ‚ÙŠÙŠÙ…');
  const description = item.description || item.overview || '';
  const watch = item.watchLink || '';
  const download = item.downloadLink || '';
  // Ù…Ù†Ø·Ù‚ TMDB: ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† TMDB ÙØ¹Ù„Ø§Ù‹ (ÙŠÙ…ØªÙ„Ùƒ media_type Ø£Ùˆ tmdb_id Ø£Ùˆ poster_path)
  const isTMDB = (
    (item.media_type || item.tmdb_id || item.poster_path)
  );
  let fromSection = '';
  if (window.currentSection) {
    fromSection = window.currentSection;
  } else if (item.type === 'anime' || item.anime) {
    fromSection = 'anime';
  } else if (item.nationality === 'Ù…ØµØ±ÙŠ') {
    fromSection = 'egyptianSeries';
  } else if (item.nationality === 'Ø£Ø¬Ù†Ø¨ÙŠ' || item.type === 'series') {
    fromSection = 'series';
  } else {
    fromSection = 'movies';
  }
  card.innerHTML = `
    <img src="${imgSrc}" alt="${title}" onerror="this.onerror=null;this.src='${defaultPoster}'" />
    <h3>${title}</h3>
    <p>${rating}</p>
    <button class="watch-btn">Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù†</button>
  `;
  card.querySelector('.watch-btn').addEventListener('click', function(e) {
    e.preventDefault();
    let url = `details.html?title=${encodeURIComponent(title)}` +
      `&rating=${encodeURIComponent(item.rating || item.vote_average || '')}` +
      `&image=${encodeURIComponent(imgSrc)}` +
      `&description=${encodeURIComponent(description)}` +
      `&watchLink=${encodeURIComponent(watch)}` +
      `&downloadLink=${encodeURIComponent(download)}` +
      `&from=${fromSection}`;
    if (item.cast) {
      url += `&cast=${encodeURIComponent(JSON.stringify(item.cast))}`;
    }
    if (isTMDB) {
      url += `&tmdb_id=${encodeURIComponent(item.id || item.tmdb_id || '')}&type=movie`;
    }
    window.location.href = url;
  });
  return card;
}

// ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© searchMovies Ù„Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª TMDB (multi) ÙˆØ¹Ø±Ø¶ Ø£ÙŠ Ù†ÙˆØ¹ Ù†ØªÙŠØ¬Ø© (ÙÙŠÙ„Ù…ØŒ Ù…Ø³Ù„Ø³Ù„ØŒ Ø£Ù†Ù…ÙŠ) ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø£ÙÙ„Ø§Ù…
function searchMovies() {
  const query = document.getElementById('searchInput').value.trim();
  const container = document.getElementById('movies-container');
  const noMoviesMsg = document.getElementById('no-movies-message');
  if (!query) {
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ø­Ø« ÙØ§Ø±ØºÙ‹Ø§ØŒ Ø£Ø¹Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    displayTMDBMovies();
    return;
  }
  showSection('movies');
  const apiKey = window.TMDB_API_KEY || 'eae62805e81ccceef6046c841a23b424';
  // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ TMDB Ø¹Ù† Ø£ÙŠ Ù†ÙˆØ¹ (ÙÙŠÙ„Ù…ØŒ Ù…Ø³Ù„Ø³Ù„ØŒ Ø£Ù†Ù…ÙŠ)
  fetch(`https://api.themoviedb.org/3/search/multi?api_key=${apiKey}&language=ar&query=${encodeURIComponent(query)}`)
    .then(r => r.json())
    .then(data => {
      if (data && data.results && data.results.length > 0) {
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬: Ø¹Ø±Ø¶ Ø£ÙŠ Ù†ÙˆØ¹ (ÙÙŠÙ„Ù…ØŒ Ù…Ø³Ù„Ø³Ù„ØŒ Ø£Ù†Ù…ÙŠ)
        const results = data.results.map(item => {
          let title = item.title || item.name || '';
          let img = item.poster_path ? (window.IMAGE_BASE_URL + item.poster_path) : 'https://via.placeholder.com/400x600?text=No+Image';
          let type = item.media_type;
          return {
            title: title,
            rating: item.vote_average ? (item.vote_average + '/10') : '',
            image: img,
            poster: img,
            description: item.overview || '',
            watchLink: '',
            downloadLink: '',
            type: type,
            id: item.id
          };
        });
        renderList('movies-container', results);
        document.getElementById('movies-section-title').textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: ${query}`;
      } else {
        container.innerHTML = "";
        if (noMoviesMsg) noMoviesMsg.style.display = 'block';
        document.getElementById('movies-section-title').textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: ${query}`;
      }
    })
    .catch(() => {
      container.innerHTML = "";
      if (noMoviesMsg) noMoviesMsg.style.display = 'block';
      document.getElementById('movies-section-title').textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: ${query}`;
    });
}
</script>
<style>
.anime-top-card {
  display: flex;
  align-items: flex-start;
  background: #181818;
  border-radius: 16px;
  box-shadow: 0 4px 18px #000a, 0 1px 0 #fff2 inset;
  margin-bottom: 32px;
  padding: 18px 18px 18px 0;
  gap: 24px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}
.anime-top-img {
  width: 180px;
  height: 260px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 2px 12px #0008;
}
.anime-top-details {
  flex: 1;
  text-align: right;
  padding-top: 8px;
}
.anime-top-title {
  font-family: 'Montserrat', 'Arial Black', Arial, sans-serif;
  font-size: 2rem;
  color: #e50914;
  margin-bottom: 8px;
  margin-top: 0;
}
.anime-top-rating {
  color: #fff;
  font-size: 1.1rem;
  margin-bottom: 10px;
}
.anime-top-desc {
  color: #eee;
  font-size: 1rem;
  line-height: 1.7;
  margin-bottom: 0;
}
</style>
</body>
</html>



